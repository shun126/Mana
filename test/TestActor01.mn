/*
mana (script)
Copyright (c) 2017 Shun Moriya
*/

// Owned by TestActor1::init
char gCharValue;
short gShortValue;
int gIntValue;
float gFloatValue;

define kStartPriority 7;
define kTalkPriority 7;
define kCompletionPriority 6;

struct TestStruct1
{
    char a;
    short b;
    int c;
    float d;
}


module TestModule
{
    action init
    {
        print("TestActor1::init\n");
    }
}

native void nativeFunctionTest(actor a0, int a1, float a2);

void functionTest(actor a0, int a1, float a2)
{
    nativeFunctionTest(a0, a1, a2);
}

// actor declarations
actor TestActor1
{
    extend TestModule;

    char mCharValue;
    short mShortValue;
    int mIntValue;
    float mFloatValue;

    action init
    {
        print("TestActor1::init\n");
        functionTest(self, 1, 2.0);

        char a;
        short b = 1;
        int c;
        float d;
    }

    action main
    {
        print("TestActor1::main\n");
        awaitStart(kStartPriority, TestActor2->talk);
        request(kTalkPriority, TestActor1->talk);
        awaitCompletion(kCompletionPriority, TestActor2->talk);
    }

    action talk
    {
        print("TestActor1::talk\n");
    }

    action sleep
    {
        print("TestActor1::sleep\n");
    }
}

actor TestActor2
{
    action talk
    {
        print("TestActor2::talk\n");
    }
}
